!function(a,b,c,d,e,f,g,h,i){c(b).ready(function(){function j(a){var b=a;10>a&&(b="0"+a);var d=u.find('.tribe-mobile-day[data-day="'+a+'"]'),e=u.find(".tribe-event-day-"+b+" .tribe-events-viewmore"),f=u.find(".tribe-event-day-"+b+" .hentry");f.length&&(f.each(function(){var a=c(this);if(a.tribe_has_attr("data-tribejson")){var b=a.data("tribejson");d.append(tribe_tmpl("tribe_tmpl_month_mobile",b))}}),e.length&&d.append(e.clone()))}function k(a,b){var c=u.find("#tribe-mobile-container"),d=u.find(".tribe-mobile-day"),e=u.find(".mobile-trigger"),f=u.find('.tribe-mobile-day[data-day="'+a+'"]'),g="undefined"==typeof b?"":b,h={date:a,date_name:g};e.removeClass("mobile-active");var i=g.length?'[data-date-name="'+g+'"]':'.tribe-events-thismonth[data-day="'+a+'"]';e.filter(i).addClass("mobile-active"),d.hide(),f.length?f.show():(c.append(tribe_tmpl("tribe_tmpl_month_mobile_day_header",h)),j(a))}function l(){var a=u.find(".tribe-events-present"),b=u.find(".mobile-trigger"),d=u.find("#tribe-events-content > .tribe-events-calendar");if(c("#tribe-mobile-container").length||c('<div id="tribe-mobile-container" />').insertAfter(d),a.length&&a.is(".tribe-events-thismonth"))k(a.attr("data-day"),a.attr("data-date-name"));else{var e=b.filter(".tribe-events-thismonth").first();k(e.attr("data-day"),e.attr("data-date-name"))}}function m(){u.find(".tribe-events-calendar th").each(function(){var a=c(this),b=a.attr("data-day-abbr"),d=a.attr("title");a.text(q.is(".tribe-mobile")?b:d)})}function n(a){q.is(".tribe-mobile")?(m(),l()):a&&m()}function o(a){if("change_view"!=tribe_events_bar_action){if(a.preventDefault(),g.ajax_running)return;v.val().length?g.date="0"!==g.datepicker_format?tribeDateFormat(v.bootstrapDatepicker("getDate"),"tribeMonthQuery"):v.val():w||(g.date=d.cur_date.slice(0,-3)),d.cur_url=g.filter_cats?c("#tribe-events-header").data("baseurl")+g.date+"/":s+g.date+"/",g.popping=!1,f.pre_ajax(function(){p()})}}function p(){f.invalid_date(g.date)||(c(".tribe-events-calendar").tribe_spin(),g.pushcount=0,g.ajax_running=!0,g.popping||(g.params={action:"tribe_calendar",eventDate:g.date},g.category&&(g.params.tribe_event_category=g.category),g.url_params={},d.default_permalinks&&(g.url_params.hasOwnProperty("post_type")||(g.url_params.post_type=i.events_post_type),g.url_params.hasOwnProperty("eventDisplay")||(g.url_params.eventDisplay=g.view)),c(e).trigger("tribe_ev_serializeBar"),g.params=c.param(g.params),g.url_params=c.param(g.url_params),c(e).trigger("tribe_ev_collectParams"),g.pushcount>0||g.filters||d.default_permalinks?(g.do_string=!0,g.pushstate=!1):(g.do_string=!1,g.pushstate=!0)),h.pushstate&&!g.filter_cats?(c(e).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_monthView_AjaxStart"),c.post(TribeCalendar.ajaxurl,g.params,function(a){if(g.initial_load=!1,f.enable_inputs("#tribe_events_filters_form","input, select"),a.success){g.ajax_running=!1,d.ajax_response={total_count:"",view:a.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()};var h="";h=c.isFunction(c.fn.parseHTML)?c.parseHTML(a.html):a.html,c("#tribe-events-content").replaceWith(h),n(!0),g.page_title=c("#tribe-events-header").data("title"),b.title=g.page_title,g.do_string&&(d.cur_url=d.cur_url+"?"+g.url_params,history.pushState({tribe_date:g.date,tribe_params:g.params},g.page_title,d.cur_url)),g.pushstate&&history.pushState({tribe_date:g.date,tribe_params:g.params},g.page_title,d.cur_url),c(e).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_monthView_ajaxSuccess")}})):a.location=g.url_params.length?d.cur_url+"?"+g.url_params:d.cur_url)}var q=c("body"),r=c('[class^="tribe-events-nav-"] a'),s="/",t=f.get_url_param("tribe-bar-date"),u=c("#tribe-events"),v=c("#tribe-bar-date"),w=!1;r.length&&(s=r.first().attr("href").slice(0,-8)),d.default_permalinks&&(s=s.split("?")[0]),c(".tribe-events-calendar").length&&c("#tribe-events-bar").length&&t&&t.length>7&&(c("#tribe-bar-date-day").val(t.slice(-3)),v.val(t.substring(0,7)));var x="yyyy-mm";if("0"!==g.datepicker_format){var y=parseInt(g.datepicker_format),z="m"+g.datepicker_format.toString();x=d.datepicker_formats.month[y],t&&(t.length<=7&&(t+="-01"),v.val(tribeDateFormat(t,z)))}if(d.datepicker_opts={format:x,minViewMode:"months",autoclose:!0},v.bootstrapDatepicker(d.datepicker_opts).on("changeDate",function(a){g.mdate=a.date;var b=a.date.getFullYear(),e=("0"+(a.date.getMonth()+1)).slice(-2);if(w=!0,g.date=b+"-"+e,h.no_bar()||h.live_ajax()&&h.pushstate){if(g.ajax_running||g.updating_picker)return;d.cur_url=g.filter_cats?c("#tribe-events-header").data("baseurl")+g.date+"/":d.default_permalinks?s:s+g.date+"/",g.popping=!1,f.pre_ajax(function(){p()})}}),n(!0),c(e).on("tribe_ev_resizeComplete",function(){n(!0)}),h.pushstate&&!h.map_view()){var A="action=tribe_calendar&eventDate="+c("#tribe-events-header").data("date");d.params.length&&(A=A+"&"+d.params),g.category&&(A=A+"&tribe_event_category="+g.category),history.replaceState({tribe_params:A},g.page_title,location.href),c(a).on("popstate",function(a){var b=a.originalEvent.state;b&&(g.do_string=!1,g.pushstate=!1,g.popping=!0,g.params=b.tribe_params,f.pre_ajax(function(){p()}),f.set_form(g.params))})}c("#tribe-events").on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(a){if(a.preventDefault(),!g.ajax_running){var b=c(this).find("a");g.date=b.data("month"),g.mdate=g.date+"-01",f.update_picker("0"!==g.datepicker_format?tribeDateFormat(g.mdate,z):g.date),d.cur_url=g.filter_cats?c("#tribe-events-header").data("baseurl"):b.attr("href"),d.default_permalinks&&(d.cur_url=d.cur_url.split("?")[0]),g.popping=!1,f.pre_ajax(function(){p()})}}).on("click","td.tribe-events-thismonth a",function(a){a.stopPropagation()}).on("click",'[id*="tribe-events-daynum-"] a',function(a){if(q.is(".tribe-mobile")){a.preventDefault();var b=c(this).closest(".mobile-trigger");k(b.attr("data-day"),b.attr("data-date-name"))}}).on("click",".mobile-trigger",function(a){q.is(".tribe-mobile")&&(a.preventDefault(),a.stopPropagation(),k(c(this).attr("data-day"),c(this).attr("data-date-name")))}),f.snap("#tribe-bar-form","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),c("form#tribe-bar-form").on("submit",function(a){o(a)}),c(e).on("tribe_ev_runAjax",function(){p()}),c(e).on("tribe_ev_updatingRecurrence",function(){g.date=c("#tribe-events-header").data("date"),d.cur_url=g.filter_cats?c("#tribe-events-header").data("baseurl")+g.date+"/":s+g.date+"/",g.popping=!1})})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);